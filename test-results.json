{"numTotalTestSuites":2,"numPassedTestSuites":0,"numFailedTestSuites":2,"numPendingTestSuites":0,"numTotalTests":10,"numPassedTests":2,"numFailedTests":8,"numPendingTests":0,"numTodoTests":0,"snapshot":{"added":0,"failure":false,"filesAdded":0,"filesRemoved":0,"filesRemovedList":[],"filesUnmatched":0,"filesUpdated":0,"matched":0,"total":0,"unchecked":0,"uncheckedKeysByFile":[],"unmatched":0,"updated":0,"didUpdate":false},"startTime":1755919364034,"success":false,"testResults":[{"assertionResults":[{"ancestorTitles":["WebRTC Video Calling"],"fullName":"WebRTC Video Calling should establish peer connection between two users","status":"failed","title":"should establish peer connection between two users","duration":19.277477999999974,"failureMessages":["TypeError: this.socket.disconnect is not a function\n    at WebRTCService.disconnect (/home/runner/workspace/client/src/services/webrtc-service.ts:445:19)\n    at /home/runner/workspace/tests/unit/webrtc-video.test.ts:62:19\n    at file:///home/runner/workspace/node_modules/@vitest/runner/dist/index.js:103:11\n    at file:///home/runner/workspace/node_modules/@vitest/runner/dist/index.js:879:20\n    at new Promise (<anonymous>)\n    at runWithTimeout (file:///home/runner/workspace/node_modules/@vitest/runner/dist/index.js:852:10)\n    at runHook (file:///home/runner/workspace/node_modules/@vitest/runner/dist/index.js:1238:51)\n    at callSuiteHook (file:///home/runner/workspace/node_modules/@vitest/runner/dist/index.js:1244:25)\n    at runTest (file:///home/runner/workspace/node_modules/@vitest/runner/dist/index.js:1383:11)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)"],"meta":{}},{"ancestorTitles":["WebRTC Video Calling"],"fullName":"WebRTC Video Calling should exchange offer/answer through signaling server","status":"passed","title":"should exchange offer/answer through signaling server","duration":2.095230000000356,"failureMessages":[],"meta":{}},{"ancestorTitles":["WebRTC Video Calling"],"fullName":"WebRTC Video Calling should handle ICE candidates properly","status":"failed","title":"should handle ICE candidates properly","duration":9.995449000000008,"failureMessages":["AssertionError: expected \"spy\" to be called with arguments: [ 'signal', ObjectContaining{…} ]\u001b[90m\n\nReceived: \n\n\u001b[1m  1st spy call:\n\n\u001b[22m\u001b[2m  [\u001b[22m\n\u001b[32m-   \"signal\",\u001b[90m\n\u001b[32m-   ObjectContaining {\u001b[90m\n\u001b[31m+   \"join-room\",\u001b[90m\n\u001b[31m+   {\u001b[90m\n\u001b[31m+     \"role\": \"student\",\u001b[90m\n\u001b[2m      \"roomId\": \"test-room-123\",\u001b[22m\n\u001b[32m-     \"signal\": ObjectContaining {\u001b[90m\n\u001b[32m-       \"type\": \"candidate\",\u001b[90m\n\u001b[32m-     },\u001b[90m\n\u001b[31m+     \"userId\": 1,\u001b[90m\n\u001b[2m    },\u001b[22m\n\u001b[2m  ]\u001b[22m\n\n\u001b[1m  2nd spy call:\n\n\u001b[22m\u001b[2m  [\u001b[22m\n\u001b[32m-   \"signal\",\u001b[90m\n\u001b[32m-   ObjectContaining {\u001b[90m\n\u001b[31m+   \"call-teacher\",\u001b[90m\n\u001b[31m+   {\u001b[90m\n\u001b[31m+     \"language\": \"en\",\u001b[90m\n\u001b[31m+     \"packageId\": 100,\u001b[90m\n\u001b[2m      \"roomId\": \"test-room-123\",\u001b[22m\n\u001b[32m-     \"signal\": ObjectContaining {\u001b[90m\n\u001b[32m-       \"type\": \"candidate\",\u001b[90m\n\u001b[32m-     },\u001b[90m\n\u001b[31m+     \"studentId\": 1,\u001b[90m\n\u001b[31m+     \"teacherId\": 2,\u001b[90m\n\u001b[2m    },\u001b[22m\n\u001b[2m  ]\u001b[22m\n\u001b[39m\u001b[90m\n\nNumber of calls: \u001b[1m2\u001b[22m\n\u001b[39m\n    at Proxy.<anonymous> (file:///home/runner/workspace/node_modules/@vitest/expect/dist/index.js:1261:10)\n    at Proxy.<anonymous> (file:///home/runner/workspace/node_modules/@vitest/expect/dist/index.js:944:14)\n    at Proxy.methodWrapper (file:///home/runner/workspace/node_modules/chai/chai.js:1618:25)\n    at /home/runner/workspace/tests/unit/webrtc-video.test.ts:202:29\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at file:///home/runner/workspace/node_modules/@vitest/runner/dist/index.js:596:20"],"meta":{}},{"ancestorTitles":["WebRTC Video Calling"],"fullName":"WebRTC Video Calling should establish video stream within 5 seconds","status":"failed","title":"should establish video stream within 5 seconds","duration":5006.381322,"failureMessages":["Error: STACK_TRACE_ERROR\n    at task (file:///home/runner/workspace/node_modules/@vitest/runner/dist/index.js:481:27)\n    at Object.<anonymous> (file:///home/runner/workspace/node_modules/@vitest/runner/dist/index.js:503:16)\n    at Object.<anonymous> (file:///home/runner/workspace/node_modules/@vitest/runner/dist/index.js:308:28)\n    at Module.chain (file:///home/runner/workspace/node_modules/@vitest/runner/dist/chunk-tasks.js:8:14)\n    at /home/runner/workspace/tests/unit/webrtc-video.test.ts:210:3\n    at file:///home/runner/workspace/node_modules/@vitest/runner/dist/index.js:578:40\n    at runWithSuite (file:///home/runner/workspace/node_modules/@vitest/runner/dist/index.js:839:8)\n    at Object.collect (file:///home/runner/workspace/node_modules/@vitest/runner/dist/index.js:578:10)\n    at Object.collect (file:///home/runner/workspace/node_modules/@vitest/runner/dist/index.js:582:54)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at collectTests (file:///home/runner/workspace/node_modules/@vitest/runner/dist/index.js:1124:25)\n    at startTests (file:///home/runner/workspace/node_modules/@vitest/runner/dist/index.js:1568:16)\n    at file:///home/runner/workspace/node_modules/vitest/dist/chunks/runBaseTests.BV8m0B-u.js:122:5\n    at withEnv (file:///home/runner/workspace/node_modules/vitest/dist/chunks/runBaseTests.BV8m0B-u.js:88:3)\n    at run (file:///home/runner/workspace/node_modules/vitest/dist/chunks/runBaseTests.BV8m0B-u.js:113:2)"],"meta":{}},{"ancestorTitles":["WebRTC Video Calling"],"fullName":"WebRTC Video Calling should establish audio stream within 5 seconds","status":"failed","title":"should establish audio stream within 5 seconds","duration":5002.268281999999,"failureMessages":["Error: STACK_TRACE_ERROR\n    at task (file:///home/runner/workspace/node_modules/@vitest/runner/dist/index.js:481:27)\n    at Object.<anonymous> (file:///home/runner/workspace/node_modules/@vitest/runner/dist/index.js:503:16)\n    at Object.<anonymous> (file:///home/runner/workspace/node_modules/@vitest/runner/dist/index.js:308:28)\n    at Module.chain (file:///home/runner/workspace/node_modules/@vitest/runner/dist/chunk-tasks.js:8:14)\n    at /home/runner/workspace/tests/unit/webrtc-video.test.ts:254:3\n    at file:///home/runner/workspace/node_modules/@vitest/runner/dist/index.js:578:40\n    at runWithSuite (file:///home/runner/workspace/node_modules/@vitest/runner/dist/index.js:839:8)\n    at Object.collect (file:///home/runner/workspace/node_modules/@vitest/runner/dist/index.js:578:10)\n    at Object.collect (file:///home/runner/workspace/node_modules/@vitest/runner/dist/index.js:582:54)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at collectTests (file:///home/runner/workspace/node_modules/@vitest/runner/dist/index.js:1124:25)\n    at startTests (file:///home/runner/workspace/node_modules/@vitest/runner/dist/index.js:1568:16)\n    at file:///home/runner/workspace/node_modules/vitest/dist/chunks/runBaseTests.BV8m0B-u.js:122:5\n    at withEnv (file:///home/runner/workspace/node_modules/vitest/dist/chunks/runBaseTests.BV8m0B-u.js:88:3)\n    at run (file:///home/runner/workspace/node_modules/vitest/dist/chunks/runBaseTests.BV8m0B-u.js:113:2)"],"meta":{}},{"ancestorTitles":["WebRTC Video Calling"],"fullName":"WebRTC Video Calling should handle connection failure and retry","status":"failed","title":"should handle connection failure and retry","duration":104.06192799999917,"failureMessages":["AssertionError: expected false to be true // Object.is equality\n    at /home/runner/workspace/tests/unit/webrtc-video.test.ts:339:27\n    at file:///home/runner/workspace/node_modules/@vitest/runner/dist/index.js:596:20"],"meta":{}},{"ancestorTitles":["WebRTC Video Calling"],"fullName":"WebRTC Video Calling should disconnect cleanly when call ends","status":"failed","title":"should disconnect cleanly when call ends","duration":3.5958100000007107,"failureMessages":["AssertionError: expected \"spy\" to be called at least once\n    at Proxy.<anonymous> (file:///home/runner/workspace/node_modules/@vitest/expect/dist/index.js:1243:10)\n    at Proxy.<anonymous> (file:///home/runner/workspace/node_modules/@vitest/expect/dist/index.js:944:14)\n    at Proxy.methodWrapper (file:///home/runner/workspace/node_modules/chai/chai.js:1618:25)\n    at /home/runner/workspace/tests/unit/webrtc-video.test.ts:382:26\n    at Array.forEach (<anonymous>)\n    at /home/runner/workspace/tests/unit/webrtc-video.test.ts:381:17\n    at file:///home/runner/workspace/node_modules/@vitest/runner/dist/index.js:103:11\n    at file:///home/runner/workspace/node_modules/@vitest/runner/dist/index.js:596:26\n    at file:///home/runner/workspace/node_modules/@vitest/runner/dist/index.js:879:20\n    at new Promise (<anonymous>)"],"meta":{}},{"ancestorTitles":["WebRTC Video Calling"],"fullName":"WebRTC Video Calling should reconnect when network changes","status":"failed","title":"should reconnect when network changes","duration":2505.680681,"failureMessages":["AssertionError: expected \"Peer\" to be called 2 times, but got 0 times\n    at /home/runner/workspace/tests/unit/webrtc-video.test.ts:424:24\n    at file:///home/runner/workspace/node_modules/@vitest/runner/dist/index.js:596:20"],"meta":{}},{"ancestorTitles":["WebRTC Video Calling"],"fullName":"WebRTC Video Calling should handle TURN server authentication","status":"failed","title":"should handle TURN server authentication","duration":2.131299000000581,"failureMessages":["AssertionError: expected \"spy\" to be called with arguments: [ …(2) ]\u001b[90m\n\nNumber of calls: \u001b[1m0\u001b[22m\n\u001b[39m\n    at Proxy.<anonymous> (file:///home/runner/workspace/node_modules/@vitest/expect/dist/index.js:1261:10)\n    at Proxy.<anonymous> (file:///home/runner/workspace/node_modules/@vitest/expect/dist/index.js:944:14)\n    at Proxy.methodWrapper (file:///home/runner/workspace/node_modules/chai/chai.js:1618:25)\n    at /home/runner/workspace/tests/unit/webrtc-video.test.ts:470:26\n    at file:///home/runner/workspace/node_modules/@vitest/runner/dist/index.js:596:20"],"meta":{}},{"ancestorTitles":["WebRTC Video Calling"],"fullName":"WebRTC Video Calling should record call when recording is enabled","status":"passed","title":"should record call when recording is enabled","duration":1.7354190000005474,"failureMessages":[],"meta":{}}],"startTime":1755919367298,"endTime":1755919379955.7354,"status":"failed","message":"","name":"/home/runner/workspace/tests/unit/webrtc-video.test.ts"}]}
