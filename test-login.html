<!DOCTYPE html>
<html>
<head>
  <title>Test Login</title>
</head>
<body>
  <h1>Testing Login</h1>
  <button id="loginBtn">Test Login</button>
  <div id="result"></div>
  <script>
    document.getElementById('loginBtn').addEventListener('click', async () => {
      try {
        const response = await fetch('http://localhost:5000/api/auth/login', {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json',
          },
          body: JSON.stringify({
            email: 'admin@test.com',
            password: 'admin123'
          })
        });
        
        const data = await response.json();
        console.log('Login response:', data);
        
        if (data.auth_token) {
          localStorage.setItem('auth_token', data.auth_token);
          document.getElementById('result').innerHTML = `
            <h2>Login successful!</h2>
            <p>Token stored. Now redirecting to dashboard...</p>
            <pre>${JSON.stringify(data, null, 2)}</pre>
          `;
          
          setTimeout(() => {
            window.location.href = '/dashboard';
          }, 2000);
        }
      } catch (error) {
        console.error('Login error:', error);
        document.getElementById('result').innerHTML = `<p style="color:red">Error: ${error.message}</p>`;
      }
    });
  </script>
</body>
</html>
