[Debug] [vite] connecting... (client, line 495)
[Debug] [vite] connected. (client, line 618)
[Log] Error handler initialized for development (error-handler.ts, line 17)
[Log] Applied RTL for language: fa (rtl-layout.tsx, line 28)
[Log] Applied RTL styles for fa (rtl-layout.tsx, line 35)
[Log] Applied RTL for language: fa (rtl-layout.tsx, line 48)
[Log] Applied RTL for language: fa (useLanguage.tsx, line 64)
[Log] Applied RTL for language: fa (rtl-layout.tsx, line 28)
[Log] Applied RTL styles for fa (rtl-layout.tsx, line 35)
[Log] Applied RTL for language: fa (rtl-layout.tsx, line 48)
[Log] Applied RTL for language: fa (useLanguage.tsx, line 64)
[Log] Processing navigation for role: â€“ "Teacher" â€“ "normalized:" â€“ "teacher" (role-based-navigation.ts, line 98)
[Log] Sidebar rendering with items: â€“ 10 â€“ "items" (sidebar.tsx, line 104)
[Log] Callern items: â€“ [Object] (1) (sidebar.tsx, line 105)
[Object]Array (1)
[Log] Processing navigation for role: â€“ "Teacher" â€“ "normalized:" â€“ "teacher" (role-based-navigation.ts, line 98)
[Log] Sidebar rendering with items: â€“ 10 â€“ "items" (sidebar.tsx, line 104)
[Log] Callern items: â€“ [Object] (1) (sidebar.tsx, line 105)
[Object]Array (1)
[Log] ğŸ”§ [TEACHER-INCOMING] useEffect triggered: â€“ {hasUser: true, userRole: "Teacher", hasSocket: false, â€¦} (teacher-incoming-call.tsx, line 69)
{hasUser: true, userRole: "Teacher", hasSocket: false, socketId: undefined, socketConnected: undefined, â€¦}Object
[Log] âŒ [TEACHER-INCOMING] Not registering listeners - missing requirements (teacher-incoming-call.tsx, line 78)
[Log] ğŸ”Œ [SOCKET-MANAGER] Creating NEW socket connection for user: â€“ 74 â€“ "role:" â€“ "Teacher" (socket-manager.ts, line 28)
[Log] Socket not connected on mount, waiting for connection... (use-socket.tsx, line 76)
[Log] ğŸ”§ [TEACHER-INCOMING] useEffect triggered: â€“ {hasUser: true, userRole: "Teacher", hasSocket: false, â€¦} (teacher-incoming-call.tsx, line 69)
{hasUser: true, userRole: "Teacher", hasSocket: false, socketId: undefined, socketConnected: undefined, â€¦}Object
[Log] âŒ [TEACHER-INCOMING] Not registering listeners - missing requirements (teacher-incoming-call.tsx, line 78)
[Log] ğŸ”§ [TEACHER-INCOMING] useEffect triggered: â€“ {hasUser: true, userRole: "Teacher", hasSocket: true, â€¦} (teacher-incoming-call.tsx, line 69)
{hasUser: true, userRole: "Teacher", hasSocket: true, socketId: undefined, socketConnected: false, â€¦}Object
[Log] ğŸ“ [TEACHER-INCOMING] Registering event listeners on socket: â€“ undefined (teacher-incoming-call.tsx, line 132)
[Log] âœ… [TEACHER-INCOMING] Event listeners registered successfully (teacher-incoming-call.tsx, line 139)
[Log] ğŸ§ª [TEACHER-INCOMING] Sending test probe to server (teacher-incoming-call.tsx, line 140)
[Log] Processing navigation for role: â€“ "Teacher" â€“ "normalized:" â€“ "teacher" (role-based-navigation.ts, line 98)
[Log] Sidebar rendering with items: â€“ 10 â€“ "items" (sidebar.tsx, line 104)
[Log] Callern items: â€“ [Object] (1) (sidebar.tsx, line 105)
[Object]Array (1)
[Log] Processing navigation for role: â€“ "Teacher" â€“ "normalized:" â€“ "teacher" (role-based-navigation.ts, line 98)
[Log] Sidebar rendering with items: â€“ 10 â€“ "items" (sidebar.tsx, line 104)
[Log] Callern items: â€“ [Object] (1) (sidebar.tsx, line 105)
[Object]Array (1)
[Log] Processing navigation for role: â€“ "Teacher" â€“ "normalized:" â€“ "teacher" (role-based-navigation.ts, line 98)
[Log] Sidebar rendering with items: â€“ 10 â€“ "items" (sidebar.tsx, line 104)
[Log] Callern items: â€“ [Object] (1) (sidebar.tsx, line 105)
[Object]Array (1)
[Log] Processing navigation for role: â€“ "Teacher" â€“ "normalized:" â€“ "teacher" (role-based-navigation.ts, line 98)
[Log] Sidebar rendering with items: â€“ 10 â€“ "items" (sidebar.tsx, line 104)
[Log] Callern items: â€“ [Object] (1) (sidebar.tsx, line 105)
[Object]Array (1)
[Log] ğŸ”Œ [SOCKET-MANAGER] Socket connected: â€“ "aM8i5HYe8jKu8DWrAAAH" â€“ "for user:" â€“ 74 â€“ "role:" â€“ "Teacher" (socket-manager.ts, line 41)
[Log] Socket provider: connected (use-socket.tsx, line 49)
[Log] ğŸ”Œ [TEACHER-INCOMING] Socket connected. (teacher-incoming-call.tsx, line 114)
[Log] Teacher socket ready for Callern availability (teacher-online-toggle.tsx, line 37)
[Log] ğŸ“¡ [TEACHER-INCOMING] Socket event: teacher-socket-test-response â€“ [Object] (1) (teacher-incoming-call.tsx, line 111)
[Object]Array (1)
[Log] âœ… [TEACHER-INCOMING] teacher-socket-test-response: â€“ {message: "Server received your test successfully", originalData: {teacherId: 74, message: "Testing teacher socket connection"}, socketId: "aM8i5HYe8jKu8DWrAAAH", â€¦} (teacher-incoming-call.tsx, line 124)
{message: "Server received your test successfully", originalData: {teacherId: 74, message: "Testing teacher socket connection"}, socketId: "aM8i5HYe8jKu8DWrAAAH", timestamp: "2025-08-31T14:17:07.135Z"}Object
[Log] ğŸ“¡ [TEACHER-INCOMING] Socket event: connection-test â€“ [{message: "Teacher socket registered successfully", teacherId: 74, timestamp: "2025-08-31T14:17:07.145Z"}] (1) (teacher-incoming-call.tsx, line 111)
[Log] âœ… [TEACHER-INCOMING] connection-test: â€“ {message: "Teacher socket registered successfully", teacherId: 74, timestamp: "2025-08-31T14:17:07.145Z"} (teacher-incoming-call.tsx, line 121)
[Log] ğŸ“¡ [TEACHER-INCOMING] Socket event: authenticated â€“ [{success: true, role: "teacher"}] (1) (teacher-incoming-call.tsx, line 111)
[Log] ğŸ“¡ [TEACHER-INCOMING] Socket event: teacher-socket-test-response â€“ [Object] (1) (teacher-incoming-call.tsx, line 111)
[Object]Array (1)
[Log] âœ… [TEACHER-INCOMING] teacher-socket-test-response: â€“ {message: "Server received your test successfully", originalData: {teacherId: 74, message: "Testing teacher socket connection"}, socketId: "aM8i5HYe8jKu8DWrAAAH", â€¦} (teacher-incoming-call.tsx, line 124)
{message: "Server received your test successfully", originalData: {teacherId: 74, message: "Testing teacher socket connection"}, socketId: "aM8i5HYe8jKu8DWrAAAH", timestamp: "2025-08-31T14:17:07.146Z"}Object
[Error] Failed to load resource: The network connection was lost. (css2, line 0)
[Error] Failed to load resource: The network connection was lost. (css2, line 0)
[Error] Failed to load resource: The network connection was lost. (css2, line 0)
[Error] Failed to load resource: The network connection was lost. (css2, line 0)
[Error] Global error: â€“ undefined
	(anonymous function) (main.tsx:46)
[Log] ğŸ“¡ [TEACHER-INCOMING] Socket event: teacher-status-update â€“ [{teacherId: 74, status: "online"}] (1) (teacher-incoming-call.tsx, line 111)
[Log] ğŸ“¡ [TEACHER-INCOMING] Socket event: teacher-online-success â€“ [{teacherId: 74, status: "online"}] (1) (teacher-incoming-call.tsx, line 111)
[Log] Teacher online for Callern: â€“ {teacherId: 74, status: "online"} (teacher-online-toggle.tsx, line 55)
[Log] ğŸ“¡ [TEACHER-INCOMING] Socket event: incoming-call â€“ [Object] (1) (teacher-incoming-call.tsx, line 111)
[Object]Array (1)
[Log] ğŸ”” [TEACHER-INCOMING] INCOMING CALL RECEIVED: â€“ {roomId: "callern-1756649859904-3gz4m1e691m", studentId: 8470, packageId: 2, â€¦} (teacher-incoming-call.tsx, line 85)
{roomId: "callern-1756649859904-3gz4m1e691m", studentId: 8470, packageId: 2, language: "English", studentInfo: Object}Object
[Log] ğŸ”” [TEACHER-INCOMING] Current socket ID: â€“ "aM8i5HYe8jKu8DWrAAAH" (teacher-incoming-call.tsx, line 86)
[Log] ğŸµ Enabling audio with user gesture... (ringtone-service.ts, line 306)
[Log] ğŸµ Creating new AudioContext (ringtone-service.ts, line 11)
[Log] ğŸµ AudioContext created with state: suspended (ringtone-service.ts, line 13)
[Log] ğŸµ Attempting to resume AudioContext during initialization... (ringtone-service.ts, line 33)
[Log] ğŸ“¡ [TEACHER-INCOMING] Socket event: incoming-call â€“ [Object] (1) (teacher-incoming-call.tsx, line 111)
[Object]Array (1)
[Log] ğŸ”” [TEACHER-INCOMING] INCOMING CALL RECEIVED: â€“ {roomId: "callern-1756649859904-3gz4m1e691m", studentId: 8470, packageId: 2, â€¦} (teacher-incoming-call.tsx, line 85)
{roomId: "callern-1756649859904-3gz4m1e691m", studentId: 8470, packageId: 2, language: "English", studentInfo: Object}Object
[Log] ğŸ”” [TEACHER-INCOMING] Current socket ID: â€“ "aM8i5HYe8jKu8DWrAAAH" (teacher-incoming-call.tsx, line 86)
[Log] ğŸµ Enabling audio with user gesture... (ringtone-service.ts, line 306)
[Log] ğŸ”” Audio init skipped (will retry on user interaction): â€“ Error: Audio init timeout â€” https://015f1230-64e7-476f-a21f-816aa81a458a-00-2aâ€¦/src/components/callern/teacher-incoming-call.tsx:92 (teacher-incoming-call.tsx, line 98)
Error: Audio init timeout â€” https://015f1230-64e7-476f-a21f-816aa81a458a-00-2aâ€¦/src/components/callern/teacher-incoming-call.tsx:92
[Log] ğŸµ Attempting to play ringtone: classic, loop: true (ringtone-service.ts, line 215)
[Log] ğŸ”‡ Stopping ringtone... (ringtone-service.ts, line 276)
[Log] ğŸ”‡ Ringtone stopped completely (ringtone-service.ts, line 298)
[Log] ğŸ”” Audio init skipped (will retry on user interaction): â€“ Error: Audio init timeout â€” https://015f1230-64e7-476f-a21f-816aa81a458a-00-2aâ€¦/src/components/callern/teacher-incoming-call.tsx:92 (teacher-incoming-call.tsx, line 98)
Error: Audio init timeout â€” https://015f1230-64e7-476f-a21f-816aa81a458a-00-2aâ€¦/src/components/callern/teacher-incoming-call.tsx:92
[Log] ğŸµ Attempting to play ringtone: classic, loop: true (ringtone-service.ts, line 215)
[Log] ğŸ”‡ Stopping ringtone... (ringtone-service.ts, line 276)
[Log] ğŸ”‡ Ringtone stopped completely (ringtone-service.ts, line 298)
[Log] ğŸµ Could not resume AudioContext yet, will retry on playback (ringtone-service.ts, line 42)
[Log] ğŸµ Audio initialized successfully (ringtone-service.ts, line 51)
[Log] ğŸµ Forcing AudioContext resume with user gesture... (ringtone-service.ts, line 311, x2)
[Log] ğŸµ AudioContext state: suspended (ringtone-service.ts, line 224)
[Log] ğŸµ Attempting final resume... (ringtone-service.ts, line 226)
[Log] ğŸµ AudioContext state: suspended (ringtone-service.ts, line 224)
[Log] ğŸµ Attempting final resume... (ringtone-service.ts, line 226)
[Log] ğŸ”‡ Stopping ringtone... (ringtone-service.ts, line 276)
[Log] ğŸ”‡ Ringtone stopped completely (ringtone-service.ts, line 298)
[Log] ğŸµ Enabling audio with user gesture... (ringtone-service.ts, line 306)
[Log] ğŸµ Forcing AudioContext resume with user gesture... (ringtone-service.ts, line 311)
[Log] ğŸµ Audio enabled successfully (ringtone-service.ts, line 314, x2)
[Log] ğŸµ AudioContext resumed, new state: running (ringtone-service.ts, line 229)
[Log] ğŸµ Starting ringtone playback: classic (ringtone-service.ts, line 265)
[Log] ğŸµ Ringtone started successfully (ringtone-service.ts, line 267)
[Log] ğŸµ AudioContext resumed, new state: running (ringtone-service.ts, line 229)
[Log] ğŸµ Starting ringtone playback: classic (ringtone-service.ts, line 265)
[Log] ğŸµ Ringtone started successfully (ringtone-service.ts, line 267)
[Log] ğŸµ Audio enabled successfully (ringtone-service.ts, line 314)
[Log] ğŸµ Attempting to play ringtone: classic, loop: true (ringtone-service.ts, line 215)
[Log] ğŸ”‡ Stopping ringtone... (ringtone-service.ts, line 276)
[Log] ğŸ”‡ Stopping audio buffer source (ringtone-service.ts, line 279)
[Log] ğŸ”‡ Audio buffer source stopped (ringtone-service.ts, line 282)
[Log] ğŸ”‡ Disconnecting gain node (ringtone-service.ts, line 290)
[Log] ğŸ”‡ Gain node disconnected (ringtone-service.ts, line 292)
[Log] ğŸ”‡ Ringtone stopped completely (ringtone-service.ts, line 298)
[Log] ğŸµ AudioContext state: running (ringtone-service.ts, line 224)
[Log] ğŸµ Starting ringtone playback: classic (ringtone-service.ts, line 265)
[Log] ğŸµ Ringtone started successfully (ringtone-service.ts, line 267)
[Log] ğŸµ AudioContext state changed to: running (ringtone-service.ts, line 15)
[Log] âœ… [TEACHER-INCOMING] Accept button clicked (teacher-incoming-call.tsx, line 151)
[Log] ğŸ”‡ [TEACHER-INCOMING] Stopping ringtone (teacher-incoming-call.tsx, line 156)
[Log] ğŸ”‡ Stopping ringtone... (ringtone-service.ts, line 276)
[Log] ğŸ”‡ Stopping audio buffer source (ringtone-service.ts, line 279)
[Log] ğŸ”‡ Audio buffer source stopped (ringtone-service.ts, line 282)
[Log] ğŸ”‡ Disconnecting gain node (ringtone-service.ts, line 290)
[Log] ğŸ”‡ Gain node disconnected (ringtone-service.ts, line 292)
[Log] ğŸ”‡ Ringtone stopped completely (ringtone-service.ts, line 298)
[Log] ğŸµ [TEACHER-INCOMING] Enabling audio (teacher-incoming-call.tsx, line 159)
[Log] ğŸµ Enabling audio with user gesture... (ringtone-service.ts, line 306)
[Log] ğŸµ Audio enabled successfully (ringtone-service.ts, line 314)
[Log] ğŸµ [TEACHER-INCOMING] Audio enabled (teacher-incoming-call.tsx, line 166)
[Log] ğŸš€ [INIT] Start â€“ {userId: 74, role: "teacher", roomId: "callern-1756649859904-3gz4m1e691m"} (VideoCallFinal.tsx, line 225)
[Log] ğŸš€ [INIT] Start â€“ {userId: 74, role: "teacher", roomId: "callern-1756649859904-3gz4m1e691m"} (VideoCallFinal.tsx, line 225)
[Log] âœ… [INIT] Done (VideoCallFinal.tsx, line 389)
[Log] [LOCAL] metadata loaded
[Log] [LOCAL] playing
[Log] Call ended (callern-enhanced.tsx, line 175)